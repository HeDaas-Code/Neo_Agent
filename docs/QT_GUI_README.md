# Neo Agent Qt GUI 使用指南

## 简介

Neo Agent Qt GUI 是一个仿QQ风格的现代化聊天界面，用于与智能代理进行对话。采用三栏布局设计，调试功能独立窗口显示。

## 功能特性

### 主要功能

- ✅ **QQ风格三栏布局** - 联系人列表 + 聊天区域 + 信息面板
- ✅ **消息气泡** - 用户消息（绿色）和AI消息（白色）气泡显示
- ✅ **时间戳** - 每条消息显示发送时间
- ✅ **表情支持** - 内置表情选择器，支持常用emoji
- ✅ **联系人列表** - 左侧白色联系人列表，带搜索框
- ✅ **信息面板** - 右侧显示AI角色详细信息
- ✅ **独立调试窗口** - 调试窗口独立显示，可选启用
- ✅ **响应式布局** - 自适应窗口大小，处理超长文本
- ✅ **异步处理** - 使用多线程处理AI响应，UI不会卡顿
- ✅ **快捷键** - Ctrl+Enter发送消息

### 界面布局

```
┌─────────────────────────────────────────────────────────────┐
│  文件   设置   帮助                                          │
├──────────┬────────────────────────────────┬─────────────────┤
│ 联系人列表│  与小可对话                     │  个人信息       │
│ (白色)   │                                │  (浅灰色)       │
│          │  09:02                         │                 │
│ 🔍 搜索  │  你好！我是小可...              │    🤖           │
│          │  (AI - 白色气泡，左对齐)        │                 │
│ 🤖 小可  │                                │  Neo Agent      │
│ [选中]   │           09:03 你好！          │  ● 在线         │
│          │  (用户 - 绿色气泡，右对齐)       │                 │
│          │                                │  ─────────      │
│          │  ─────────────────────────────  │  📋 个人信息    │
│          │  😊 [表情选择]                 │  角色: 学生     │
│          │  [输入框]                      │  年龄: 18       │
│          │  Ctrl+Enter 发送        [发送] │  性格: 活泼开朗  │
└──────────┴────────────────────────────────┴─────────────────┘

            调试窗口（独立，可选显示）
            ┌──────────────────────────┐
            │  🐛 调试信息              │
            │  [09:37:55] Debug opened │
            │  [09:37:55] ChatAgent... │
            │                 [清空日志]│
            └──────────────────────────┘
```

## 安装与运行

### 1. 安装依赖

```bash
pip install -r requirements.txt
```

### 2. 配置环境

```bash
cp example.env .env
# 编辑 .env 配置API密钥和角色信息
```

### 3. 运行GUI

```bash
python run_qt.py
```

## 使用方法

### 基本对话

1. 在底部输入框输入消息
2. 点击"发送"按钮或按 `Ctrl+Enter` 发送
3. AI会在聊天区域回复消息

### 使用表情

1. 点击输入框上方的 😊 表情按钮
2. 从弹出菜单选择想要的表情
3. 表情会自动插入到输入框光标位置

### 启用调试窗口

1. 从菜单栏选择"设置" → "调试窗口" ✓
2. 独立的调试窗口将弹出显示
3. 可以独立移动和调整窗口大小
4. 再次点击菜单可关闭调试窗口

### 清空对话

1. 从菜单栏选择"设置" → "清空对话"
2. 确认后会清除所有聊天记录

## 快捷键

| 快捷键 | 功能 |
|--------|------|
| `Ctrl+Enter` | 发送消息 |
| `Ctrl+Q` | 退出应用 |

## 界面说明

### 左栏 - 联系人列表（260px）
- **搜索框**：快速搜索联系人（占位）
- **联系人项**：显示当前对话对象
- **白色主题**：清爽简洁的设计
- **选中效果**：灰色背景标识当前对话

### 中栏 - 聊天区域（可伸缩）
- **顶部标题栏**：显示对话对象名称
- **消息区域**：滚动显示所有对话
- **输入工具栏**：表情按钮等快捷工具
- **输入框**：多行文本输入
- **发送按钮**：蓝色发送按钮

### 右栏 - 信息面板（280px）
- **头像**：大圆形头像显示
- **名称**：角色名称
- **状态**：在线状态指示
- **详细信息**：角色、年龄、性格、爱好等

### 调试窗口（独立）
- **标题栏**：🐛 调试信息
- **日志区域**：绿色终端风格实时日志
- **清空按钮**：快速清空日志内容
- **独立控制**：可独立关闭不影响主界面

## 对比原有GUI

### 主要改进

1. **布局重构** - 从单栏改为QQ风格三栏
2. **调试独立** - 从嵌入式改为独立窗口
3. **配色优化** - 白色/浅色主题更现代
4. **信息展示** - 右侧信息面板更清晰
5. **空间利用** - 调试不占主界面空间

### 功能对比

| 特性 | 原版本 | 新版本 |
|------|--------|--------|
| 布局 | 暗色侧边栏 | QQ三栏布局 |
| 联系人 | 无 | 独立列表 |
| 调试面板 | 嵌入右侧 | 独立窗口 |
| 配色 | 深色+浅色混合 | 统一浅色 |
| 信息展示 | 侧边栏 | 独立面板 |

## 技术细节

### 核心组件

- **ChatGUIQt** - 主窗口，管理三栏布局
- **DebugWindow** - 独立调试窗口
- **MessageBubble** - 消息气泡组件
- **ChatThread** - 异步聊天线程

### 窗口尺寸

- 默认大小：1200x700
- 最小大小：900x600
- 左栏固定：260px
- 右栏固定：280px
- 中栏弹性：自适应

### 调试窗口

- 默认大小：600x400
- 最小大小：400x300
- 可独立移动和调整
- 自动滚动到最新日志

## 故障排除

### 问题：调试窗口不显示

**解决方案**:
1. 检查菜单"设置→调试窗口"是否勾选
2. 调试窗口可能被其他窗口遮挡，检查任务栏
3. 尝试重启应用

### 问题：布局显示异常

**解决方案**:
1. 确保窗口大小不小于900x600
2. 尝试调整窗口大小触发重绘
3. 重启应用恢复默认布局

## 更新日志

### v2.0 - QQ风格重构
- 完全重构为QQ风格三栏布局
- 调试面板改为独立窗口
- 新增联系人列表和信息面板
- 优化配色方案为浅色主题

### v1.0 - 初始版本
- 基础聊天功能
- 表情支持
- 时间戳显示
- 嵌入式调试面板
