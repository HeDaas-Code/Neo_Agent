# äº‹ä»¶é©±åŠ¨ç³»ç»Ÿæ¶æ„å›¾

## ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¨æˆ·ç•Œé¢å±‚ (GUI)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              gui_enhanced.py - äº‹ä»¶ç®¡ç†ç•Œé¢                â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚   â”‚
â”‚  â”‚  â”‚ åˆ›å»ºäº‹ä»¶   â”‚  â”‚ è§¦å‘äº‹ä»¶   â”‚  â”‚ æŸ¥çœ‹è¯¦æƒ…   â”‚         â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       æ™ºèƒ½ä½“å±‚ (ChatAgent)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    chat_agent.py                          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚  handle_event()  - ç»Ÿä¸€äº‹ä»¶å¤„ç†å…¥å£                â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ process_notification_event()  é€šçŸ¥å‹äº‹ä»¶       â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€ process_task_event()         ä»»åŠ¡å‹äº‹ä»¶        â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    äº‹ä»¶å¤„ç†å±‚ (Coordinators)                      â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  é€šçŸ¥å‹äº‹ä»¶å¤„ç†          â”‚     â”‚   ä»»åŠ¡å‹äº‹ä»¶å¤„ç†          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚     â”‚  multi_agent_coordinator â”‚   â”‚
â”‚  â”‚  â”‚ 1. ç†è§£äº‹ä»¶      â”‚   â”‚     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ 2. ç”Ÿæˆè¯´æ˜      â”‚   â”‚     â”‚  â”‚ 1. ä»»åŠ¡ç†è§£        â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ 3. è¿”å›ç»“æœ      â”‚   â”‚     â”‚  â”‚ 2. åˆ¶å®šè®¡åˆ’        â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚     â”‚  â”‚ 3. æ‰§è¡Œæ­¥éª¤        â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚ 4. éªŒè¯ç»“æœ        â”‚  â”‚   â”‚
â”‚                                   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       å·¥å…·å±‚ (Tools)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ interrupt_question_tool  â”‚     â”‚    SubAgent (å­æ™ºèƒ½ä½“)   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ ask_user()       â”‚    â”‚     â”‚  â”‚ ç†è§£æ™ºèƒ½ä½“        â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ æ ¼å¼åŒ–é—®é¢˜        â”‚    â”‚     â”‚  â”‚ è§„åˆ’æ™ºèƒ½ä½“        â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ å›è°ƒå¤„ç†          â”‚    â”‚     â”‚  â”‚ æ‰§è¡Œæ™ºèƒ½ä½“        â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚     â”‚  â”‚ éªŒè¯æ™ºèƒ½ä½“        â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®å­˜å‚¨å±‚ (Database)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                 event_manager.py                          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚  events è¡¨      â”‚         â”‚   event_logs è¡¨          â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ event_id   â”‚         â”‚   â”œâ”€ log_id             â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ title      â”‚         â”‚   â”œâ”€ event_id           â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ type       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€ log_type           â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ priority   â”‚         â”‚   â”œâ”€ log_content        â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ status     â”‚         â”‚   â””â”€ created_at         â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€ metadata   â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## é€šçŸ¥å‹äº‹ä»¶å¤„ç†æµç¨‹

```
ç”¨æˆ· (GUI)
    â”‚
    â”‚ 1. åˆ›å»ºé€šçŸ¥äº‹ä»¶
    â–¼
EventManager
    â”‚
    â”‚ 2. ä¿å­˜åˆ°æ•°æ®åº“
    â–¼
[events è¡¨]
    â”‚
    â”‚ 3. ç”¨æˆ·è§¦å‘äº‹ä»¶
    â–¼
ChatAgent.handle_event()
    â”‚
    â”‚ 4. è¯†åˆ«ä¸ºé€šçŸ¥å‹
    â–¼
ChatAgent.process_notification_event()
    â”‚
    â”‚ 5. æ„å»ºç†è§£æç¤º
    â–¼
SiliconFlowLLM
    â”‚
    â”‚ 6. è°ƒç”¨ API ç†è§£äº‹ä»¶
    â–¼
æ™ºèƒ½ä½“åˆ†æ
    â”‚
    â”‚ 7. ç”Ÿæˆè¯´æ˜æ–‡æœ¬
    â–¼
ChatAgent
    â”‚
    â”‚ 8. è®°å½•æ—¥å¿—
    â–¼
EventManager.add_event_log()
    â”‚
    â”‚ 9. æ›´æ–°çŠ¶æ€ä¸ºå·²å®Œæˆ
    â–¼
EventManager.update_event_status()
    â”‚
    â”‚ 10. è¿”å›è¯´æ˜ç»™ç”¨æˆ·
    â–¼
GUI æ˜¾ç¤ºç»“æœ
```

## ä»»åŠ¡å‹äº‹ä»¶å¤„ç†æµç¨‹

```
ç”¨æˆ· (GUI)
    â”‚
    â”‚ 1. åˆ›å»ºä»»åŠ¡äº‹ä»¶
    â–¼
EventManager
    â”‚
    â”‚ 2. ä¿å­˜ä»»åŠ¡ä¿¡æ¯
    â–¼
[events è¡¨]
    â”‚
    â”‚ 3. ç”¨æˆ·è§¦å‘äº‹ä»¶
    â–¼
ChatAgent.handle_event()
    â”‚
    â”‚ 4. è¯†åˆ«ä¸ºä»»åŠ¡å‹
    â–¼
ChatAgent.process_task_event()
    â”‚
    â”‚ 5. å‡†å¤‡è§’è‰²ä¸Šä¸‹æ–‡
    â–¼
MultiAgentCoordinator.process_task_event()
    â”‚
    â”‚ ğŸ“¢ è¿›åº¦: "æ™ºèƒ½ä½“å¼€å§‹åˆ†æä»»åŠ¡..."
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                      â”‚
    â–¼ é˜¶æ®µ1: ä»»åŠ¡ç†è§£                      â”‚
SubAgent (ç†è§£æ™ºèƒ½ä½“)                      â”‚
    â”‚                                      â”‚
    â”‚ åˆ†æä»»åŠ¡éœ€æ±‚                          â”‚
    â”‚ ç†è§£å®Œæˆæ ‡å‡†                          â”‚
    â–¼                                      â”‚
è¿”å›ä»»åŠ¡ç†è§£                                â”‚
    â”‚                                      â”‚
    â”‚ ğŸ“¢ è¿›åº¦: "ä»»åŠ¡å·²ç†è§£..."              â”‚
    â–¼                                      â”‚
    â”‚                                      â”‚
    â–¼ é˜¶æ®µ2: åˆ¶å®šè®¡åˆ’                      â”‚
SubAgent (è§„åˆ’æ™ºèƒ½ä½“)                      â”‚
    â”‚                                      â”‚
    â”‚ åˆ†è§£ä»»åŠ¡ä¸º3-5æ­¥éª¤                     â”‚
    â–¼                                      â”‚
è¿”å›æ‰§è¡Œè®¡åˆ’                                â”‚
    â”‚                                      â”‚
    â”‚ ğŸ“¢ è¿›åº¦: "æ‰§è¡Œè®¡åˆ’å·²åˆ¶å®šï¼Œå…±Næ­¥..."    â”‚
    â–¼                                      â”‚
    â”‚                                      â”‚
    â–¼ é˜¶æ®µ3: æ‰§è¡Œæ­¥éª¤                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚ FOR æ¯ä¸ªæ­¥éª¤      â”‚                      â”‚
â”‚   â”‚              â”‚                      â”‚
â”‚   â–¼              â”‚                      â”‚
â”‚ SubAgent (æ‰§è¡Œ)   â”‚                      â”‚
â”‚   â”‚              â”‚                      â”‚
â”‚   â”‚ æ‰§è¡Œå½“å‰æ­¥éª¤  â”‚                      â”‚
â”‚   â–¼              â”‚                      â”‚
â”‚ æ˜¯å¦éœ€è¦ç”¨æˆ·è¾“å…¥? â”‚                      â”‚
â”‚   â”‚              â”‚                      â”‚
â”‚   â”œâ”€ æ˜¯ â”€â”€â”€â”€â”€â”€â–º  â”‚                      â”‚
â”‚   â”‚  InterruptQuestionTool              â”‚
â”‚   â”‚    â”‚                                â”‚
â”‚   â”‚    â”‚ ask_user()                     â”‚
â”‚   â”‚    â–¼                                â”‚
â”‚   â”‚  GUIå¯¹è¯æ¡†                          â”‚
â”‚   â”‚    â”‚                                â”‚
â”‚   â”‚    â”‚ ç”¨æˆ·è¾“å…¥                        â”‚
â”‚   â”‚    â–¼                                â”‚
â”‚   â”‚  è¿”å›ç­”æ¡ˆ                            â”‚
â”‚   â”‚    â”‚                                â”‚
â”‚   â—„â”€â”€â”€â”€â”˜                                â”‚
â”‚   â”‚              â”‚                      â”‚
â”‚   â”‚ ğŸ“¢ è¿›åº¦: "æ­¥éª¤Nå®Œæˆ"                 â”‚
â”‚   â–¼              â”‚                      â”‚
â”‚ ä¸‹ä¸€æ­¥éª¤         â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
    â”‚                                      â”‚
    â”‚ ğŸ“¢ è¿›åº¦: "æ‰€æœ‰æ­¥éª¤å·²å®Œæˆ..."         â”‚
    â–¼                                      â”‚
    â”‚                                      â”‚
    â–¼ é˜¶æ®µ4: éªŒè¯ç»“æœ                      â”‚
SubAgent (éªŒè¯æ™ºèƒ½ä½“)                      â”‚
    â”‚                                      â”‚
    â”‚ å¯¹ç…§å®Œæˆæ ‡å‡†                          â”‚
    â”‚ æ£€æŸ¥æ‰§è¡Œç»“æœ                          â”‚
    â–¼                                      â”‚
è¿”å›éªŒè¯ç»“æœ                                â”‚
    â”‚                                      â”‚
    â”‚ ğŸ“¢ è¿›åº¦: "âœ… ä»»åŠ¡éªŒè¯é€šè¿‡ï¼"          â”‚
    â–¼                                      â”‚
MultiAgentCoordinator                     â”‚
    â”‚                                      â”‚
    â”‚ æ•´ç†ç»“æœ                              â”‚
    â–¼                                      â”‚
ChatAgent                                  â”‚
    â”‚                                      â”‚
    â”‚ è®°å½•æ—¥å¿—                              â”‚
    â”‚ æ›´æ–°çŠ¶æ€                              â”‚
    â–¼                                      â”‚
GUI æ˜¾ç¤ºç»“æœ                                â”‚
```

## æ•°æ®æµå›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç”¨æˆ·    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
      â”‚
      â”‚ åˆ›å»º/è§¦å‘äº‹ä»¶
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     GUI      â”‚â—„â”€â”€â”€â”€â–ºâ”‚ EventManager â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                     â”‚
       â”‚ äº‹ä»¶æ“ä½œ             â”‚ CRUDæ“ä½œ
       â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ChatAgent   â”‚      â”‚   Database   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”œâ”€ events   â”‚
       â”‚              â”‚  â””â”€ logs     â”‚
       â”‚ äº‹ä»¶å¤„ç†      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚             â”‚
       â–¼             â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ é€šçŸ¥å¤„ç† â”‚  â”‚ å¤šæ™ºèƒ½ä½“åä½œ    â”‚
  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                â”‚
       â”‚                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                â”‚             â”‚
       â”‚                â–¼             â–¼
       â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚         â”‚ SubAgent â”‚  â”‚ QuestionToolâ”‚
       â”‚         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚               â”‚              â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ API è°ƒç”¨
                       â–¼
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚ SiliconFlow   â”‚
               â”‚     API       â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ç±»å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Event        â”‚ äº‹ä»¶åŸºç±»
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  + event_id        â”‚
â”‚  + title           â”‚
â”‚  + description     â”‚
â”‚  + event_type      â”‚
â”‚  + priority        â”‚
â”‚  + status          â”‚
â”‚  + metadata        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  + to_dict()       â”‚
â”‚  + from_dict()     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                    â”‚                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚NotificationEvent  â”‚  â”‚   TaskEvent    â”‚  â”‚  (å¯æ‰©å±•)        â”‚
â”‚                   â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚  â”‚                  â”‚
â”‚ é€šçŸ¥å‹äº‹ä»¶         â”‚  â”‚ + task_req     â”‚  â”‚  å…¶ä»–äº‹ä»¶ç±»å‹     â”‚
â”‚                   â”‚  â”‚ + completion   â”‚  â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   EventManager     â”‚ äº‹ä»¶ç®¡ç†å™¨
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  + db              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  + create_event()  â”‚
â”‚  + get_event()     â”‚
â”‚  + update_status() â”‚
â”‚  + add_log()       â”‚
â”‚  + get_logs()      â”‚
â”‚  + delete_event()  â”‚
â”‚  + get_statistics()â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚MultiAgentCoord.    â”‚ å¤šæ™ºèƒ½ä½“åè°ƒå™¨
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  + question_tool   â”‚
â”‚  + progress_cb     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  + process_task()  â”‚
â”‚  + emit_progress() â”‚
â”‚  + _understand()   â”‚
â”‚  + _plan()         â”‚
â”‚  + _execute()      â”‚
â”‚  + _verify()       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     SubAgent       â”‚ å­æ™ºèƒ½ä½“
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  + agent_id        â”‚
â”‚  + role            â”‚
â”‚  + description     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  + execute_task()  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚InterruptQuestion   â”‚ ä¸­æ–­æé—®å·¥å…·
â”‚      Tool          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  + callback        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  + ask_user()      â”‚
â”‚  + _format_q()     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## çŠ¶æ€æœºå›¾

```
äº‹ä»¶ç”Ÿå‘½å‘¨æœŸçŠ¶æ€è½¬æ¢:

         [åˆ›å»º]
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   PENDING    â”‚ å¾…å¤„ç†
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
            â”‚ è§¦å‘
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  PROCESSING  â”‚ å¤„ç†ä¸­
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
            â”‚
        â”Œâ”€â”€â”€â”´â”€â”€â”€â”
        â”‚       â”‚
    æˆåŠŸ â”‚       â”‚ å¤±è´¥
        â”‚       â”‚
        â–¼       â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”
  â”‚COMPL â”‚  â”‚FAILEDâ”‚
  â”‚ETED  â”‚  â”‚      â”‚
  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜
  
  å¯ä»ä»»æ„çŠ¶æ€è½¬æ¢åˆ°:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ CANCELLED â”‚ å·²å–æ¶ˆ
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ¨¡å—ä¾èµ–å…³ç³»

```
gui_enhanced.py
    â”œâ”€â–º chat_agent.py
    â”‚       â”œâ”€â–º event_manager.py
    â”‚       â”‚       â””â”€â–º database_manager.py
    â”‚       â”œâ”€â–º interrupt_question_tool.py
    â”‚       â””â”€â–º multi_agent_coordinator.py
    â”‚               â”œâ”€â–º event_manager.py
    â”‚               â”œâ”€â–º interrupt_question_tool.py
    â”‚               â””â”€â–º debug_logger.py
    â””â”€â–º event_manager.py
```

## å…³é”®è®¾è®¡æ¨¡å¼

### 1. ç­–ç•¥æ¨¡å¼
- ä¸åŒäº‹ä»¶ç±»å‹ä½¿ç”¨ä¸åŒçš„å¤„ç†ç­–ç•¥
- `NotificationEvent` â†’ `process_notification_event()`
- `TaskEvent` â†’ `process_task_event()`

### 2. è´£ä»»é“¾æ¨¡å¼
- å¤šæ™ºèƒ½ä½“åä½œä¸­çš„ä»»åŠ¡ä¼ é€’
- ç†è§£ â†’ è§„åˆ’ â†’ æ‰§è¡Œ â†’ éªŒè¯

### 3. è§‚å¯Ÿè€…æ¨¡å¼
- è¿›åº¦å›è°ƒæœºåˆ¶
- æ—ç™½å¼æç¤ºè¾“å‡º

### 4. å·¥å‚æ¨¡å¼
- `EventManager.create_event()` æ ¹æ®ç±»å‹åˆ›å»ºä¸åŒäº‹ä»¶

### 5. ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ¨¡å¼
- æ•°æ®åº“è¿æ¥ç®¡ç†
- `with self.db.get_connection() as conn:`

---

æœ€åæ›´æ–°ï¼š2025-01-19
