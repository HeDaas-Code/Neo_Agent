# 日程管理GUI可视化功能

## 概述

为Neo Agent的日程管理系统添加了完整的GUI可视化界面，集成在数据库管理标签页中。

## 主要功能

### 1. 日程列表展示
- **📅 日程管理** 标签页，显示所有日程
- 列显示：标题、类型、优先级、时间、协作状态、可查询状态
- 颜色标记：
  - 🟠 橙色：待确认的协作日程
  - 🔴 红色：高优先级日程

### 2. 工具栏功能
- **➕添加日程**：创建新日程
  - 支持三种类型：周期日程、预约日程、临时日程
  - 可设置优先级：低、中、高、关键
  - 可选涉及用户参与（自动设置协作确认状态）
  
- **✏编辑**：编辑选中的日程
  - 修改标题、描述
  - 调整优先级
  - 更改时间

- **🗑删除**：删除选中的日程
  - 软删除，设置为非激活状态

- **🔄刷新**：刷新日程列表

### 3. 筛选功能
- **类型筛选**：全部 / 周期日程 / 预约日程 / 临时日程
- **日期筛选**：今天 / 明天 / 本周 / 全部
- 实时更新列表

### 4. 协作确认
- **待确认提示**：工具栏显示待确认协作日程数量
  - 例如："⚠️ 有 2 个待确认的协作日程"
- **右键菜单**：
  - 编辑
  - 删除
  - 确认协作
  - 拒绝协作

### 5. 统计信息
- 底部显示日程统计：
  - 总计日程数
  - 各类型日程数量
  - 待确认协作日程数

### 6. 双击编辑
- 双击任意日程即可快速编辑

## 界面布局

```
┌─────────────────────────────────────────────────────────────┐
│ 工具栏                                                        │
│ [➕添加日程] [✏编辑] [🗑删除] [🔄刷新]  ⚠️ 有X个待确认... │
│ 类型: [全部▼]  日期: [今天▼]                                │
├─────────────────────────────────────────────────────────────┤
│ 标题        │类型│优先级│时间               │协作状态│可查询│
├─────────────────────────────────────────────────────────────┤
│ 英语课      │周期│关键  │2026-01-19 09:00...│不需要  │是   │
│ 团队会议    │预约│高    │2026-01-20 14:00...│不需要  │是   │
│ 一起看电影  │临时│低    │2026-01-19 19:00...│待确认  │否   │
├─────────────────────────────────────────────────────────────┤
│ 统计：总计 3 个日程 | 周期: 1 | 预约: 1 | 临时: 1 | 待确认: 1│
└─────────────────────────────────────────────────────────────┘
```

## 使用流程

### 添加日程
1. 点击「➕添加日程」按钮
2. 填写表单：
   - 标题（必填）
   - 描述
   - 类型（周期/预约/临时）
   - 优先级（低/中/高/关键）
   - 开始时间（日期 + 时间）
   - 结束时间（日期 + 时间）
   - 涉及用户参与（仅临时日程）
3. 点击「保存」
4. 系统自动检查冲突
5. 成功/失败提示

### 编辑日程
1. 选中要编辑的日程
2. 双击或点击「✏编辑」按钮
3. 修改信息
4. 点击「保存」

### 删除日程
1. 选中要删除的日程
2. 点击「🗑删除」按钮
3. 确认删除

### 确认协作日程
1. 方法一：右键点击待确认日程 → 选择「确认协作」或「拒绝协作」
2. 方法二：选中日程 → 点击右键菜单相应选项
3. 确认后日程变为可查询状态

## 自动刷新

- 集成到数据库管理GUI的自动刷新机制
- 点击顶部「🔄 刷新全部」会刷新所有标签页包括日程
- 可设置刷新间隔（1-10秒）

## 技术实现

### 新增方法（database_gui.py）

1. `create_schedules_tab()` - 创建日程管理标签页
2. `refresh_schedules()` - 刷新日程列表
3. `add_schedule()` - 添加日程对话框
4. `edit_schedule()` - 编辑日程对话框
5. `delete_schedule()` - 删除日程
6. `show_schedule_context_menu()` - 显示右键菜单
7. `confirm_schedule_collaboration()` - 确认协作
8. `reject_schedule_collaboration()` - 拒绝协作

### 集成点

- 在 `create_widgets()` 中调用 `create_schedules_tab()`
- 在 `refresh_all()` 中调用 `refresh_schedules()`

### 数据源

- 使用 `ScheduleManager` 从数据库读取日程
- 支持按类型、日期筛选
- 实时显示统计信息

## 代码统计

- 新增代码行数：约 628 行
- database_gui.py 总行数：2224 行
- 包含 'schedule' 的行数：161 行

## 兼容性

- 完全兼容现有GUI框架
- 遵循现有设计模式和代码风格
- 使用相同的UI组件（Tkinter、ttk）
- 集成现有的tooltip和自动刷新机制
